{% extends 'base.html' %}

<!-- {% load easy_maps_tags %} -->

{% load humanize %}

{% block title %} | {{ listing.title }} {% endblock %}

{%block content %}
<section id="showcase-inner" class="text-white vertical-center d-none d-md-block">
  <div class="overlay"></div>
  <div class="container-fluid">
    <div class="row text-center">
      <div class="col-md-12 ">
        <h1 class="isplay-4 font-weight-bold">{{ listing.title }}</h1>
        <h4 class="lead">
          <i class="fas fa-map-marker"></i>{{ listing.neighborhood }}
        </h4>
      </div>
    </div>
  </div>
</section>

<section class="py-0">
  <div class="container py-2">
    <div class="row">
      <div class="col-3 col-md-1 my-auto p-0">
        <a href="{% url 'search' %}" id="back">
          <div class="btn rounded-0 text-primary">
            <i class="fas fa-arrow-left fa-2x"> </i>
          </div>
        </a>
      </div>
      <div class="col-9 col-md-6 text-center my-auto p-0">
        <h4 class="m-0">{{ listing.title }}</h4>
        <h5 class="font-weight-light m-0">{{ listing.property_address }}</h5>
      </div>
      <div class="col-md-4 d-none d-md-block text-center my-auto">
        <h4>{{ listing.developer.name }}</h4>
      </div>
      <div class="col-md-1 d-none d-md-block text-center my-auto p-0" id="favorite-section">
        {% if is_favorite %}
        <a href="{% url 'favorite_listing' listing.id %}" class="text-primary">
          <i class="fas fa-heart fa-3x"></i>
        </a>
        {% else %}
        <a href="{% url 'favorite_listing' listing.id %}" class="text-primary">
          <i class="far fa-heart fa-3x"></i>
        </a>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- Info -->
<section id="property-info" class="pb-0">
  <div class="container listing-info d-none d-md-block py-2">
    <div class="row justify-content-center align-items-center h-100">
      <div class="col-3 text-center px-0">
        <h5 class="mb-0">1 Bedroom <span
            class="font-weight-light">${{ listing.one_bedroom_price.lower }}-${{ listing.one_bedroom_price.upper }}</span>
        </h5>
      </div>
      <div class="col-3 text-center px-0">
        <h5 class="mb-0">2 Bedroom <span
            class="font-weight-light">${{ listing.two_bedroom_price.lower }}-${{ listing.two_bedroom_price.upper }}</span>
        </h5>
      </div>
      <div class="col-3 text-center px-0">
        <h5 class="mb-0">3 Bedroom <span
            class="font-weight-light">${{ listing.three_bedroom_price.lower }}-${{ listing.three_bedroom_price.upper }}</span>
        </h5>
      </div>
    </div>
  </div>
</section>

<!-- Listing -->
<section id="listing" class="pt-0">
  <div class="container">
    <div class="row">
      <div class="col-md-8 p-0 m-0">
        <div id="imgCarousel" class="carousel slide">
          <!-- main slider carousel items -->
          <div class="carousel-inner">
            <div class="active item carousel-item" data-slide-number="0">
              <img src="{{ listing.photo_main.url }}" class="img-fluid" />
            </div>
            {% if listing.photo_1 %}
            <div class="item carousel-item" data-slide-number="1">
              <img src="{{ listing.photo_1.url }}" class="img-fluid" />
            </div>
            {% endif %}
            {% if listing.photo_2 %}
            <div class="item carousel-item" data-slide-number="1">
              <img src="{{ listing.photo_2.url }}" class="img-fluid" />
            </div>
            {% endif %}
            {% if listing.photo_3 %}
            <div class="item carousel-item" data-slide-number="1">
              <img src="{{ listing.photo_3.url }}" class="img-fluid" />
            </div>
            {% endif %}
            {% if listing.photo_4 %}
            <div class="item carousel-item" data-slide-number="1">
              <img src="{{ listing.photo_4.url }}" class="img-fluid" />
            </div>
            {% endif %}
            {% if listing.photo_5 %}
            <div class="item carousel-item" data-slide-number="1">
              <img src="{{ listing.photo_5.url }}" class="img-fluid" />
            </div>
            {% endif %}
            {% if listing.photo_6 %}
            <div class="item carousel-item" data-slide-number="1">
              <img src="{{ listing.photo_6.url }}" class="img-fluid" />
            </div>
            {% endif %}
            <a class="carousel-control-prev" href="#imgCarousel" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#imgCarousel" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
          <!-- main slider carousel nav controls -->

          <div class="row d-flex flex-nowrap m-0">
            <ul class="carousel-indicators">
              <li class="list-inline-item active" data-slide-to="0" data-target="#imgCarousel">
                <a id="carousel-selector-0" class="selected">
                  <img src="{{ listing.photo_main.url }}" class="img-fluid" />
                </a>
              </li>
              {% if listing.photo_1 %}
              <li class="list-inline-item" data-slide-to="1" data-target="#imgCarousel">
                <a id="carousel-selector-1">
                  <img src="{{ listing.photo_1.url }}" class="img-fluid" />
                </a>
              </li>
              {% endif %}
              {% if listing.photo_2 %}
              <li class="list-inline-item" data-slide-to="1" data-target="#imgCarousel">
                <a id="carousel-selector-1">
                  <img src="{{ listing.photo_2.url }}" class="img-fluid" />
                </a>
              </li>
              {% endif %}
              {% if listing.photo_3 %}
              <li class="list-inline-item" data-slide-to="1" data-target="#imgCarousel">
                <a id="carousel-selector-1">
                  <img src="{{ listing.photo_3.url }}" class="img-fluid" />
                </a>
              </li>
              {% endif %}
              {% if listing.photo_4 %}
              <li class="list-inline-item" data-slide-to="1" data-target="#imgCarousel">
                <a id="carousel-selector-1">
                  <img src="{{ listing.photo_4.url }}" class="img-fluid" />
                </a>
              </li>
              {% endif %}
              {% if listing.photo_5 %}
              <li class="list-inline-item" data-slide-to="1" data-target="#imgCarousel">
                <a id="carousel-selector-1">
                  <img src="{{ listing.photo_5.url }}" class="img-fluid" />
                </a>
              </li>
              {% endif %}
              {% if listing.photo_6 %}
              <li class="list-inline-item" data-slide-to="1" data-target="#imgCarousel">
                <a id="carousel-selector-1">
                  <img src="{{ listing.photo_6.url }}" class="img-fluid" />
                </a>
              </li>
              {% endif %}

              <li class="list-inline-item" data-slide-to="2" data-target="#imgCarousel">
                <a id="carousel-selector-2">
                  <img src="{{ listing.photo_2.url }}" class="img-fluid" />
                </a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Fields -->
        <!-- <div class="container">
          <div class="row mb-5 fields">
            <div class="col-md-6">
              <ul class="list-group list-group-flush text-black-50">
                <li class="list-group-item">
                  Asking Price:
                  <span class="float-right">${{ listing.price | intcomma }}</span>
                </li>
                <li class="list-group-item">
                  Bedrooms:
                  <span class="float-right">{{ listing.bathrooms }}</span>
                </li>
                <li class="list-group-item">
                  Bathrooms:
                  <span class="float-right">{{ listing.bathrooms }}</span>
                </li>
              </ul>
            </div>
            <div class="col-md-6">
              <ul class="list-group list-group-flush text-black-50">
                <li class="list-group-item">
                  Square Feet:
                  <span class="float-right">{{ listing.sqft }}</span>
                </li>
                <li class="list-group-item">
                  Garage:
                  <span class="float-right">{{ listing.garage }} </span>
                </li>
                <li class="list-group-item">
                  <i class="fas fa-bed"></i> Realtor:
                  <span class="float-right">{{ listing.developer }} </span>
                </li>
              </ul>
            </div>
          </div>
        </div> -->

        <!-- Description -->
        <div class="row mb-5">
          <div class="container">
            <div class="col-md-12">
              <h3 class="mb-3">About {{ listing.title }}'s Residences</h3>
              {{ listing.description }}
            </div>
          </div>
        </div>
        <!-- Features -->
        <div class="row mb-5">
          <div class="container">
            <div class="col-md-12">
              <h3 class="mb-3">Amenities</h3>
              <div class="row">
                <div class="col-lg-6">
                  <div class=" d-flex">
                    <div class="col-1 d-flex justify-content-end p-0 text-primary">
                      <i class="fas fa-file-contract fa-2x"></i>
                    </div>
                    <div class="col-11">
                      <h4>Lease Opitions</h4>
                      <ul>
                        {% for choice in listing.lease_length %}
                        <li>{{ choice }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class=" d-flex">
                    <div class="col-1 d-flex justify-content-end p-0 text-primary">
                      <i class="fas fa-shield-alt fa-2x"></i>
                    </div>
                    <div class="col-11">
                      <h4>Security</h4>
                      <ul>
                        {% for choice in listing.security %}
                        <li>{{ choice }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class=" d-flex">
                    <div class="col-1 d-flex justify-content-end text-primary p-0">
                      <i class="fas fa-car fa-2x"></i>
                    </div>
                    <div class="col-11">
                      <h4>Parking</h4>
                      <ul>
                        {% for choice in listing.parking %}
                        <li>{{ choice }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class=" d-flex">
                    <div class="col-1 d-flex justify-content-end p-0 text-primary">
                      <i class="fas fa-concierge-bell fa-2x"></i>
                    </div>
                    <div class="col-11">
                      <h4>Services</h4>
                      <ul>
                        {% for choice in listing.service %}
                        <li>{{ choice }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class=" d-flex">
                    <div class=" col-1 d-flex justify-content-end p-0 text-primary">
                      <i class="fas fa-wifi fa-2x"></i>
                    </div>
                    <div class="col-11">
                      <h4>Features</h4>
                      <ul>
                        {% for choice in listing.features %}
                        <li>{{ choice }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class=" d-flex">
                    <div class="col-1 d-flex justify-content-end p-0 text-primary">
                      <i class="fas fa-dumbbell fa-2x"></i>
                    </div>
                    <div class="col-11">
                      <h4>Fitness & Recreation</h4>
                      <ul>
                        {% for choice in listing.fitness_recreation %}
                        <li>{{ choice }}</li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Card -->
      <div class="col-md-4 m-0">
        <div class="row d-none d-md-block" id="contact-form">
          <div class="card-title text-center w-100 mb-0 py-3 color1 border-0 text-white">
            <h2 class="mb-0">
              <i class="fas fa-phone"></i> {{ listing.developer.phone }}
            </h2>
          </div>
          <div class="col-12 color3 py-3">
            <div class="form-group m-0">
              <form action="{% url 'contact' %}" method="POST">
                {% csrf_token %} {% if user.is_authenticated %}
                <input type="hidden" name="user_id" value="{{ user.id }}" />
                {% else %}
                <input type="hidden" name="user_id" value="0" />
                {% endif %}
                <input type="hidden" name="realtor_email" value="{{ listing.developer.email }}" />
                <input type="hidden" name="listing_id" value="{{ listing.id }}" />
                <input type="hidden" name="listing" class="form-control rounded-0" value="{{ listing.title }}" />
                <div class="form-group">
                  <input type="text" name="name" class="form-control rounded-0" placeholder="Name" {%
                    if
                    user.is_authenticated
                    %} value="{{ user.first_name }} {{ user.last_name }}" {%
                    endif
                    %} required />
                </div>
                <div class="form-group">
                  <input type="email" name="email" class="form-control rounded-0" placeholder="Email Address" {%
                    if
                    user.is_authenticated
                    %} value="{{ user.email }}" {%
                    endif
                    %} required />
                </div>
                <div class="form-group">
                  <input type="text" name="phone" placeholder="Phone Number" class="form-control rounded-0" />
                </div>
                <div class="form-group mb-2">
                  <textarea name="message" class="form-control rounded-0" placeholder="Enter Your Message"></textarea>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input" type="checkbox" value="" id="defaultCheck1" />
                  <label class="form-check-label text-muted" for="defaultCheck1">
                    Schedule a tour
                  </label>
                  <br />
                  <input class="form-check-input" type="checkbox" value="" id="defaultCheck2" />
                  <label class="form-check-label text-muted" for="defaultCheck2">
                    Confirm Availibity
                  </label>
                </div>
                <input type="submit" value="Send Message" class="btn btn-block color1 text-white" />
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container-fluid color1 py-3 d-block d-md-none fixed-bottom" id="mobile-contact">
    <div class="row justify-content-center">
      <div class="col-4 text-center text-white p-0 m-auto" data-toggle="modal" data-target="#inquiryModal">Send Message
      </div>
      <div class="col-4 text-center text-white border-right border-left p-0 m-auto"><a
          href="tel:{{ listing.developer.phone }}"></a>Call Now</div>
      <div class="col-2 text-center text-white p-0 m-auto">
        {% if is_favorite %}
        <a href="{% url 'favorite_listing' listing.id %}" class="text-white">
          <i class="fas fa-heart fa-2x"></i>
        </a>
        {% else %}
        <a href="{% url 'favorite_listing' listing.id %}" class="text-white">
          <i class="far fa-heart fa-2x"></i>
        </a>
        {% endif %}</i></div>
    </div>
  </div>
</section>

<!-- Inquiry Modal -->
<div class="modal fade" id="inquiryModal" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="inquiryModalLabel">Send Massage</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="{% url 'contact' %}" method="POST">
          {% csrf_token %}
          {% if user.is_authenticated %}
          <input type="hidden" name="user_id" value="{{ user.id }}">
          {% else %}
          <input type="hidden" name="user_id" value="0">
          {% endif %}
          <input type="hidden" name="realtor_email" value="{{ listing.realtor.email }}">
          <input type="hidden" name="listing_id" value="{{ listing.id }}">
          <div class="form-group">
            <label for="property_name" class="col-form-label">Property:</label>
            <input type="text" name="listing" class="form-control" value="{{ listing.title }}">
          </div>
          <div class="form-group">
            <label for="name" class="col-form-label">Name:</label>
            <input type="text" name="name" class="form-control" {% if user.is_authenticated %}
              value="{{ user.first_name }} {{ user.last_name }}" {% endif %} required>
          </div>
          <div class="form-group">
            <label for="email" class="col-form-label">Email:</label>
            <input type="email" name="email" class="form-control" {% if user.is_authenticated %}
              value="{{ user.email }}" {% endif %} required>
          </div>
          <div class="form-group">
            <label for="phone" class="col-form-label">Phone:</label>
            <input type="text" name="phone" class="form-control">
          </div>
          <div class="form-group">
            <label for="message" class="col-form-label">Message:</label>
            <textarea name="message" class="form-control"></textarea>
          </div>
          <hr>
          <input type="submit" value="Send" class="btn btn-block color1 text-white">
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}